{"ast":null,"code":"import _classCallCheck from\"/Users/frankfeng/Desktop/Academic/Rice/COMP531/hw6/hw6-frontend-frankfeng98/ricezone/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/frankfeng/Desktop/Academic/Rice/COMP531/hw6/hw6-frontend-frankfeng98/ricezone/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/frankfeng/Desktop/Academic/Rice/COMP531/hw6/hw6-frontend-frankfeng98/ricezone/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/frankfeng/Desktop/Academic/Rice/COMP531/hw6/hw6-frontend-frankfeng98/ricezone/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import{connect}from'react-redux';import{Formik,Field,Form,ErrorMessage}from'formik';import*as Yup from'yup';import{addFollowers,getPosts}from'../../actions';import toast from'react-hot-toast';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var AddFollower=/*#__PURE__*/function(_Component){_inherits(AddFollower,_Component);var _super=_createSuper(AddFollower);function AddFollower(){var _this;_classCallCheck(this,AddFollower);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.handleSubmit=function(values,actions){_this.props.addFollower(values);_this.props.updatePost(_this.props.user);_this.checkFollower(values);actions.setSubmitting(false);actions.resetForm();};return _this;}_createClass(AddFollower,[{key:\"checkFollower\",value:function checkFollower(values){var addFollowerSuccess=false;if(this.props.user.username===values.follower){toast.error(\"Cannot add oneself as follower.\");}else{this.props.userList.forEach(function(user){if(user.username===values.follower){addFollowerSuccess=true;}});if(!addFollowerSuccess){toast.error(\"User does not exist\");}}}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(Formik,{initialValues:{follower:''},validationSchema:Yup.object({follower:Yup.string().required(\"Required\")}),onSubmit:this.handleSubmit,children:/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col mb-2 block\",children:[/*#__PURE__*/_jsx(Field,{name:\"follower\",type:\"text\",className:\"mt-1\",placeholder:\"Add a follower\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"follower\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"py-2 items-center rounded-md border border-transparent bg-indigo-600 px-3 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2\",children:\"Add User\"})]})});}}]);return AddFollower;}(Component);var mapStateToProps=function mapStateToProps(state){return{user:state.currentUser,userList:state.userList};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{addFollower:function addFollower(user){return dispatch(addFollowers(user));},updatePost:function updatePost(user){return dispatch(getPosts(user));}};};export default connect(mapStateToProps,mapDispatchToProps)(AddFollower);","map":{"version":3,"names":["React","Component","connect","Formik","Field","Form","ErrorMessage","Yup","addFollowers","getPosts","toast","AddFollower","handleSubmit","values","actions","props","addFollower","updatePost","user","checkFollower","setSubmitting","resetForm","addFollowerSuccess","username","follower","error","userList","forEach","object","string","required","mapStateToProps","state","currentUser","mapDispatchToProps","dispatch"],"sources":["/Users/frankfeng/Desktop/Academic/Rice/COMP531/hw6/hw6-frontend-frankfeng98/ricezone/src/components/MainPage/AddFollower.jsx"],"sourcesContent":["import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Field, Form, ErrorMessage } from 'formik'\nimport * as Yup from 'yup';\nimport { addFollowers, getPosts } from '../../actions';\nimport toast from 'react-hot-toast';\n\nexport class AddFollower extends Component {\n    handleSubmit =(values, actions) => {\n        this.props.addFollower(values);\n        this.props.updatePost(this.props.user);\n        this.checkFollower(values);\n        actions.setSubmitting(false);\n        actions.resetForm();\n    }\n    \n    checkFollower(values) {\n        let addFollowerSuccess = false; \n        if (this.props.user.username === values.follower) {\n            toast.error(\"Cannot add oneself as follower.\");\n        } else {\n            this.props.userList.forEach(user => {\n                if (user.username === values.follower) {\n                    addFollowerSuccess = true;\n                }\n            })\n            if (!addFollowerSuccess) {\n                toast.error(\"User does not exist\");\n            }\n        }\n    }\n    \n    render() {\n        return (\n            <Formik\n                initialValues={{follower: ''}}\n                validationSchema={Yup.object({\n                    follower:Yup.string().required(\"Required\")\n                })}\n                onSubmit={this.handleSubmit}\n            >\n                <Form>\n                    <div className=\"flex flex-col mb-2 block\">\n                        <Field name=\"follower\" type=\"text\" className=\"mt-1\" placeholder=\"Add a follower\"/>\n                        <ErrorMessage name=\"follower\" />\n                    </div>\n                    <button type=\"submit\" className=\"py-2 items-center rounded-md border border-transparent bg-indigo-600 px-3 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2\">\n                    Add User\n                    </button>\n                </Form>    \n            </Formik>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => ({\n    user: state.currentUser,\n    userList: state.userList\n})\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        addFollower: (user) => dispatch(addFollowers(user)),\n        updatePost: (user) => dispatch(getPosts(user))\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddFollower)"],"mappings":"wpBAAA,MAAOA,MAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,OAAO,KAAQ,aAAa,CACrC,OAASC,MAAM,CAAEC,KAAK,CAAEC,IAAI,CAAEC,YAAY,KAAQ,QAAQ,CAC1D,MAAO,GAAKC,IAAG,KAAM,KAAK,CAC1B,OAASC,YAAY,CAAEC,QAAQ,KAAQ,eAAe,CACtD,MAAOC,MAAK,KAAM,iBAAiB,CAAC,wFAEpC,UAAaC,YAAW,+UACpBC,YAAY,CAAE,SAACC,MAAM,CAAEC,OAAO,CAAK,CAC/B,MAAKC,KAAK,CAACC,WAAW,CAACH,MAAM,CAAC,CAC9B,MAAKE,KAAK,CAACE,UAAU,CAAC,MAAKF,KAAK,CAACG,IAAI,CAAC,CACtC,MAAKC,aAAa,CAACN,MAAM,CAAC,CAC1BC,OAAO,CAACM,aAAa,CAAC,KAAK,CAAC,CAC5BN,OAAO,CAACO,SAAS,EAAE,CACvB,CAAC,oEAED,uBAAcR,MAAM,CAAE,CAClB,GAAIS,mBAAkB,CAAG,KAAK,CAC9B,GAAI,IAAI,CAACP,KAAK,CAACG,IAAI,CAACK,QAAQ,GAAKV,MAAM,CAACW,QAAQ,CAAE,CAC9Cd,KAAK,CAACe,KAAK,CAAC,iCAAiC,CAAC,CAClD,CAAC,IAAM,CACH,IAAI,CAACV,KAAK,CAACW,QAAQ,CAACC,OAAO,CAAC,SAAAT,IAAI,CAAI,CAChC,GAAIA,IAAI,CAACK,QAAQ,GAAKV,MAAM,CAACW,QAAQ,CAAE,CACnCF,kBAAkB,CAAG,IAAI,CAC7B,CACJ,CAAC,CAAC,CACF,GAAI,CAACA,kBAAkB,CAAE,CACrBZ,KAAK,CAACe,KAAK,CAAC,qBAAqB,CAAC,CACtC,CACJ,CACJ,CAAC,sBAED,iBAAS,CACL,mBACI,KAAC,MAAM,EACH,aAAa,CAAE,CAACD,QAAQ,CAAE,EAAE,CAAE,CAC9B,gBAAgB,CAAEjB,GAAG,CAACqB,MAAM,CAAC,CACzBJ,QAAQ,CAACjB,GAAG,CAACsB,MAAM,EAAE,CAACC,QAAQ,CAAC,UAAU,CAC7C,CAAC,CAAE,CACH,QAAQ,CAAE,IAAI,CAAClB,YAAa,uBAE5B,MAAC,IAAI,yBACD,aAAK,SAAS,CAAC,0BAA0B,wBACrC,KAAC,KAAK,EAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,WAAW,CAAC,gBAAgB,EAAE,cAClF,KAAC,YAAY,EAAC,IAAI,CAAC,UAAU,EAAG,GAC9B,cACN,eAAQ,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,uNAAuN,sBAE9O,GACN,EACF,CAEjB,CAAC,yBA7C4BX,SAAS,EAgD1C,GAAM8B,gBAAe,CAAG,QAAlBA,gBAAe,CAAIC,KAAK,QAAM,CAChCd,IAAI,CAAEc,KAAK,CAACC,WAAW,CACvBP,QAAQ,CAAEM,KAAK,CAACN,QACpB,CAAC,EAAC,CAEF,GAAMQ,mBAAkB,CAAG,QAArBA,mBAAkB,CAAIC,QAAQ,CAAK,CACrC,MAAO,CACHnB,WAAW,CAAE,qBAACE,IAAI,QAAKiB,SAAQ,CAAC3B,YAAY,CAACU,IAAI,CAAC,CAAC,GACnDD,UAAU,CAAE,oBAACC,IAAI,QAAKiB,SAAQ,CAAC1B,QAAQ,CAACS,IAAI,CAAC,CAAC,EAClD,CAAC,CACL,CAAC,CAED,cAAehB,QAAO,CAAC6B,eAAe,CAAEG,kBAAkB,CAAC,CAACvB,WAAW,CAAC"},"metadata":{},"sourceType":"module"}