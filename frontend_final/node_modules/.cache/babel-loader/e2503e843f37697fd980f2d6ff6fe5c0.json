{"ast":null,"code":"import _classCallCheck from\"/Users/frankfeng/Desktop/Academic/Rice/COMP531/hw7/final-frontend-frankfeng98/ricezone/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/frankfeng/Desktop/Academic/Rice/COMP531/hw7/final-frontend-frankfeng98/ricezone/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/frankfeng/Desktop/Academic/Rice/COMP531/hw7/final-frontend-frankfeng98/ricezone/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/frankfeng/Desktop/Academic/Rice/COMP531/hw7/final-frontend-frankfeng98/ricezone/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import{connect}from'react-redux';import{Formik,Field,Form,ErrorMessage}from'formik';import*as Yup from'yup';import{editArticle,editComment as _editComment}from'../../reducers';import toast from'react-hot-toast';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var EditComment=/*#__PURE__*/function(_Component){_inherits(EditComment,_Component);var _super=_createSuper(EditComment);function EditComment(props){var _this;_classCallCheck(this,EditComment);_this=_super.call(this,props);_this.handleSubmit=function(values,actions){values['pid']=_this.props.articleId;values['commentId']=_this.props.comment.commentId;var commentText=_this.props.comment.text;var commentUser=commentText.split(':');if(_this.props.user===commentUser[0]){_this.props.editComment(values);}else{toast.error(\"You can only edit your comment.\");}actions.setSubmitting(false);actions.resetForm();};return _this;}_createClass(EditComment,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(Formik,{initialValues:{text:''},validationSchema:Yup.object({text:Yup.string().required(\"Required\")}),onSubmit:this.handleSubmit,children:/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col mb-2 block\",children:[/*#__PURE__*/_jsx(Field,{name:\"text\",type:\"text\",className:\"mt-1\",placeholder:\"Edit your comment here.\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"text\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"py-2 items-center rounded-md border border-transparent bg-indigo-600 px-3 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2\",children:\"Edit\"})]})});}}]);return EditComment;}(Component);var mapStateToProps=function mapStateToProps(state){return{user:state.currentUser};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{editComment:function editComment(payload){return dispatch(_editComment(payload));}};};export default connect(mapStateToProps,mapDispatchToProps)(EditComment);","map":{"version":3,"names":["React","Component","connect","Formik","Field","Form","ErrorMessage","Yup","editArticle","editComment","toast","EditComment","props","handleSubmit","values","actions","articleId","comment","commentId","commentText","text","commentUser","split","user","error","setSubmitting","resetForm","object","string","required","mapStateToProps","state","currentUser","mapDispatchToProps","dispatch","payload"],"sources":["/Users/frankfeng/Desktop/Academic/Rice/COMP531/hw7/final-frontend-frankfeng98/ricezone/src/components/MainPage/EditComment.jsx"],"sourcesContent":["import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Field, Form, ErrorMessage } from 'formik'\nimport * as Yup from 'yup';\nimport { editArticle, editComment } from '../../reducers';\nimport toast from 'react-hot-toast';\n\nexport class EditComment extends Component {\n    constructor(props) {\n        super(props);\n    }\n\n    handleSubmit =(values, actions) => {\n        values['pid'] = this.props.articleId;\n        values['commentId'] = this.props.comment.commentId;\n        let commentText = this.props.comment.text;\n        let commentUser = commentText.split(':')\n        if (this.props.user === commentUser[0]) {\n            this.props.editComment(values);\n        } else {\n            toast.error(\"You can only edit your comment.\")\n        }\n        actions.setSubmitting(false);\n        actions.resetForm();\n    }  \n    render() {\n        return (\n            <Formik\n                initialValues={{text: ''}}\n                validationSchema={Yup.object({\n                    text:Yup.string().required(\"Required\")\n                })}\n                onSubmit={this.handleSubmit}\n            >\n                <Form>\n                    <div className=\"flex flex-col mb-2 block\">\n                        <Field name=\"text\" type=\"text\" className=\"mt-1\" placeholder=\"Edit your comment here.\"/>\n                        <ErrorMessage name=\"text\" />\n                    </div>\n                    <button type=\"submit\" className=\"py-2 items-center rounded-md border border-transparent bg-indigo-600 px-3 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2\">\n                    Edit\n                    </button>\n                </Form>    \n            </Formik>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => ({\n    user: state.currentUser\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n    editComment: (payload) => dispatch(editComment(payload))\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EditComment)"],"mappings":"gqBAAA,MAAOA,MAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,OAAO,KAAQ,aAAa,CACrC,OAASC,MAAM,CAAEC,KAAK,CAAEC,IAAI,CAAEC,YAAY,KAAQ,QAAQ,CAC1D,MAAO,GAAKC,IAAG,KAAM,KAAK,CAC1B,OAASC,WAAW,CAAEC,WAAW,GAAXA,aAAW,KAAQ,gBAAgB,CACzD,MAAOC,MAAK,KAAM,iBAAiB,CAAC,wFAEpC,UAAaC,YAAW,0GACpB,qBAAYC,KAAK,CAAE,6CACf,uBAAMA,KAAK,EAAE,MAGjBC,YAAY,CAAE,SAACC,MAAM,CAAEC,OAAO,CAAK,CAC/BD,MAAM,CAAC,KAAK,CAAC,CAAG,MAAKF,KAAK,CAACI,SAAS,CACpCF,MAAM,CAAC,WAAW,CAAC,CAAG,MAAKF,KAAK,CAACK,OAAO,CAACC,SAAS,CAClD,GAAIC,YAAW,CAAG,MAAKP,KAAK,CAACK,OAAO,CAACG,IAAI,CACzC,GAAIC,YAAW,CAAGF,WAAW,CAACG,KAAK,CAAC,GAAG,CAAC,CACxC,GAAI,MAAKV,KAAK,CAACW,IAAI,GAAKF,WAAW,CAAC,CAAC,CAAC,CAAE,CACpC,MAAKT,KAAK,CAACH,WAAW,CAACK,MAAM,CAAC,CAClC,CAAC,IAAM,CACHJ,KAAK,CAACc,KAAK,CAAC,iCAAiC,CAAC,CAClD,CACAT,OAAO,CAACU,aAAa,CAAC,KAAK,CAAC,CAC5BV,OAAO,CAACW,SAAS,EAAE,CACvB,CAAC,cAdD,CAAC,8CAeD,iBAAS,CACL,mBACI,KAAC,MAAM,EACH,aAAa,CAAE,CAACN,IAAI,CAAE,EAAE,CAAE,CAC1B,gBAAgB,CAAEb,GAAG,CAACoB,MAAM,CAAC,CACzBP,IAAI,CAACb,GAAG,CAACqB,MAAM,EAAE,CAACC,QAAQ,CAAC,UAAU,CACzC,CAAC,CAAE,CACH,QAAQ,CAAE,IAAI,CAAChB,YAAa,uBAE5B,MAAC,IAAI,yBACD,aAAK,SAAS,CAAC,0BAA0B,wBACrC,KAAC,KAAK,EAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,WAAW,CAAC,yBAAyB,EAAE,cACvF,KAAC,YAAY,EAAC,IAAI,CAAC,MAAM,EAAG,GAC1B,cACN,eAAQ,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,uNAAuN,kBAE9O,GACN,EACF,CAEjB,CAAC,yBAtC4BZ,SAAS,EAyC1C,GAAM6B,gBAAe,CAAG,QAAlBA,gBAAe,CAAIC,KAAK,QAAM,CAChCR,IAAI,CAAEQ,KAAK,CAACC,WAChB,CAAC,EAAC,CAEF,GAAMC,mBAAkB,CAAG,QAArBA,mBAAkB,CAAIC,QAAQ,QAAM,CACtCzB,WAAW,CAAE,qBAAC0B,OAAO,QAAKD,SAAQ,CAACzB,YAAW,CAAC0B,OAAO,CAAC,CAAC,EAC5D,CAAC,EAAC,CAEF,cAAejC,QAAO,CAAC4B,eAAe,CAAEG,kBAAkB,CAAC,CAACtB,WAAW,CAAC"},"metadata":{},"sourceType":"module"}