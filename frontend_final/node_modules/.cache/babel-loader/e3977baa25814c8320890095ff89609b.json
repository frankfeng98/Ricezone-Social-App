{"ast":null,"code":"import _classCallCheck from\"/Users/frankfeng/Desktop/Academic/Rice/COMP531/hw7/final-frontend-frankfeng98/ricezone/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/frankfeng/Desktop/Academic/Rice/COMP531/hw7/final-frontend-frankfeng98/ricezone/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/frankfeng/Desktop/Academic/Rice/COMP531/hw7/final-frontend-frankfeng98/ricezone/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/frankfeng/Desktop/Academic/Rice/COMP531/hw7/final-frontend-frankfeng98/ricezone/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import{connect}from'react-redux';import{Formik,Field,Form,ErrorMessage}from'formik';import*as Yup from'yup';import{editArticle as _editArticle}from'../../reducers';import toast from'react-hot-toast';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var EditArticle=/*#__PURE__*/function(_Component){_inherits(EditArticle,_Component);var _super=_createSuper(EditArticle);function EditArticle(props){var _this;_classCallCheck(this,EditArticle);_this=_super.call(this,props);_this.handleSubmit=function(values,actions){values['pid']=_this.props.articleId;if(_this.props.user===_this.props.author){_this.props.editArticle(values);}else{toast.error(\"You can only edit your article.\");}actions.setSubmitting(false);actions.resetForm();};return _this;}_createClass(EditArticle,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(Formik,{initialValues:{text:''},validationSchema:Yup.object({text:Yup.string().required(\"Required\")}),onSubmit:this.handleSubmit,children:/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col mb-2 block\",children:[/*#__PURE__*/_jsx(Field,{name:\"text\",type:\"text\",className:\"mt-1\",placeholder:\"Edit article here.\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"text\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"py-2 items-center rounded-md border border-transparent bg-indigo-600 px-3 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2\",children:\"Edit\"})]})});}}]);return EditArticle;}(Component);var mapStateToProps=function mapStateToProps(state){return{user:state.currentUser};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{editArticle:function editArticle(payload){return dispatch(_editArticle(payload));}};};export default connect(mapStateToProps,mapDispatchToProps)(EditArticle);","map":{"version":3,"names":["React","Component","connect","Formik","Field","Form","ErrorMessage","Yup","editArticle","toast","EditArticle","props","handleSubmit","values","actions","articleId","user","author","error","setSubmitting","resetForm","text","object","string","required","mapStateToProps","state","currentUser","mapDispatchToProps","dispatch","payload"],"sources":["/Users/frankfeng/Desktop/Academic/Rice/COMP531/hw7/final-frontend-frankfeng98/ricezone/src/components/MainPage/EditArticle.jsx"],"sourcesContent":["import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Formik, Field, Form, ErrorMessage } from 'formik'\nimport * as Yup from 'yup';\nimport { editArticle } from '../../reducers';\nimport toast from 'react-hot-toast';\n\nexport class EditArticle extends Component {\n    constructor(props) {\n        super(props);\n    }\n\n    handleSubmit =(values, actions) => {\n        values['pid'] = this.props.articleId;\n        if (this.props.user === this.props.author) {\n            this.props.editArticle(values);\n        } else {\n            toast.error(\"You can only edit your article.\")\n        }\n        actions.setSubmitting(false);\n        actions.resetForm();\n    }  \n    render() {\n        return (\n            <Formik\n                initialValues={{text: ''}}\n                validationSchema={Yup.object({\n                    text:Yup.string().required(\"Required\")\n                })}\n                onSubmit={this.handleSubmit}\n            >\n                <Form>\n                    <div className=\"flex flex-col mb-2 block\">\n                        <Field name=\"text\" type=\"text\" className=\"mt-1\" placeholder=\"Edit article here.\"/>\n                        <ErrorMessage name=\"text\" />\n                    </div>\n                    <button type=\"submit\" className=\"py-2 items-center rounded-md border border-transparent bg-indigo-600 px-3 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2\">\n                    Edit\n                    </button>\n                </Form>    \n            </Formik>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => ({\n    user: state.currentUser\n})\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        editArticle: (payload) => dispatch(editArticle(payload))\n    }\n  }\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EditArticle)"],"mappings":"gqBAAA,MAAOA,MAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,OAAO,KAAQ,aAAa,CACrC,OAASC,MAAM,CAAEC,KAAK,CAAEC,IAAI,CAAEC,YAAY,KAAQ,QAAQ,CAC1D,MAAO,GAAKC,IAAG,KAAM,KAAK,CAC1B,OAASC,WAAW,GAAXA,aAAW,KAAQ,gBAAgB,CAC5C,MAAOC,MAAK,KAAM,iBAAiB,CAAC,wFAEpC,UAAaC,YAAW,0GACpB,qBAAYC,KAAK,CAAE,6CACf,uBAAMA,KAAK,EAAE,MAGjBC,YAAY,CAAE,SAACC,MAAM,CAAEC,OAAO,CAAK,CAC/BD,MAAM,CAAC,KAAK,CAAC,CAAG,MAAKF,KAAK,CAACI,SAAS,CACpC,GAAI,MAAKJ,KAAK,CAACK,IAAI,GAAK,MAAKL,KAAK,CAACM,MAAM,CAAE,CACvC,MAAKN,KAAK,CAACH,WAAW,CAACK,MAAM,CAAC,CAClC,CAAC,IAAM,CACHJ,KAAK,CAACS,KAAK,CAAC,iCAAiC,CAAC,CAClD,CACAJ,OAAO,CAACK,aAAa,CAAC,KAAK,CAAC,CAC5BL,OAAO,CAACM,SAAS,EAAE,CACvB,CAAC,cAXD,CAAC,8CAYD,iBAAS,CACL,mBACI,KAAC,MAAM,EACH,aAAa,CAAE,CAACC,IAAI,CAAE,EAAE,CAAE,CAC1B,gBAAgB,CAAEd,GAAG,CAACe,MAAM,CAAC,CACzBD,IAAI,CAACd,GAAG,CAACgB,MAAM,EAAE,CAACC,QAAQ,CAAC,UAAU,CACzC,CAAC,CAAE,CACH,QAAQ,CAAE,IAAI,CAACZ,YAAa,uBAE5B,MAAC,IAAI,yBACD,aAAK,SAAS,CAAC,0BAA0B,wBACrC,KAAC,KAAK,EAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,WAAW,CAAC,oBAAoB,EAAE,cAClF,KAAC,YAAY,EAAC,IAAI,CAAC,MAAM,EAAG,GAC1B,cACN,eAAQ,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,uNAAuN,kBAE9O,GACN,EACF,CAEjB,CAAC,yBAnC4BX,SAAS,EAsC1C,GAAMwB,gBAAe,CAAG,QAAlBA,gBAAe,CAAIC,KAAK,QAAM,CAChCV,IAAI,CAAEU,KAAK,CAACC,WAChB,CAAC,EAAC,CAEF,GAAMC,mBAAkB,CAAG,QAArBA,mBAAkB,CAAIC,QAAQ,CAAK,CACrC,MAAO,CACHrB,WAAW,CAAE,qBAACsB,OAAO,QAAKD,SAAQ,CAACrB,YAAW,CAACsB,OAAO,CAAC,CAAC,EAC5D,CAAC,CACH,CAAC,CAEH,cAAe5B,QAAO,CAACuB,eAAe,CAAEG,kBAAkB,CAAC,CAAClB,WAAW,CAAC"},"metadata":{},"sourceType":"module"}